# Системные переменные

## Здесь будут перечислены некоторые переменные, которые создаются конструктором автоматически



{% hint style="info" %}
Чтобы вывести значение переменной нужно заключать имя переменной в конструкцию

**#{имя переменной}**
{% endhint %}



#### \_request

Содержит запрос от мессенджера, который был отправлен в конструктор. Запрос хранится в виде JSON строки.

#### \_request\_headers

Содержит входящий заголовок запроса, только для приема вебхука. Заголовок хранится в виде JSON строки.

#### \_response

Предназначена для ответа сервера на запрос к вебхуку конструктора. В сценариях действий, где используются действия Обмен данными (Ожидание данных) и CRM (Принять из CRM) присвойте ответ в переменную \_response

#### \_sendtomessid

Объект, создаваемый через отправку в бот. Содержит в себе метки, адресатов и id сообщений для удаления.

#### \_botname

Имя бота

#### \_bottype

Тип бота. Содержит обозначение мессенджера или бот-лендинга. Возможные значения: telegram, wa, vk, viber, lp

#### \_botuser

Юзернейм бота

#### \_botid

BotID бота

#### \_iscontact

Для отслеживания получения контакта по кнопке. Значения: 0 или 1

#### \_contact\_name

Имя контакта (для WhatsApp)

#### \_islocation

Для отслеживания получения геопозиции по кнопке. Значения: 0 или 1

#### \_location\_address

Адрес отправленный через выбор геопозиции (для WhatsApp)

#### \_error

Содержит ошибку для действия "Работа с группами и каналами в Telegram"

#### \_lphost

Содержит хост сайта или бот-лендинга для ботов, запущенных через виджет для сайта или бот-лендинг

#### \_receipt\_email

Для работы с отправкой онлайн чеков по 54-ФЗ. В эту переменную необходимо поместить емейл покупателя перед генерацией платежной ссылки

#### \_receipt\_phone

Для работы с отправкой онлайн чеков по 54-ФЗ. В эту переменную необходимо поместить телефон покупателя перед генерацией платежной ссылки

#### \_isstart

Признак запуска сценария: 0 - нет, 1 - да



## Для работы с группами/каналами Телеграм

#### \_tggroup

0 или 1. Принято обращение из группы - 1 или из бота - 0

#### \_tggroup\_id

ID группы

#### \_tggroup\_user\_id

ID подписчика - ClientID

#### \_tggroup\_message\_id

ID сообщения

#### \_tggroup\_first\_name

Имя подписчика в Телеграм

#### \_tggroup\_last\_name

Фамилия подписчика в Телеграм

#### \_tggroup\_username

Юзернейм подписчика

#### \_tggroup\_title

Название группы

#### \_tggroup\_date

Дата TimeStamp в секундах

#### \_tggroup\_text

Сообщение подписчика

#### \_tggroup\_message\_type

Тип сообщения: text, photo, video, audio, document, poll, voice

#### \_tggroup\_message\_from

Сообщение из группы или комментарий к посту канала. Значения: group, channel

#### \_tggroup\_photo

строка JSON объекта фото

#### \_tggroup\_video

строка JSON объекта видео

#### \_tggroup\_audio

строка JSON объекта аудио

#### \_tggroup\_document

строка JSON объекта файла/документа

#### \_tggroup\_poll

строка JSON объекта голосования

#### \_tggroup\_voice

строка JSON объекта голосового сообщения

#### \_tggroup\_is\_topic\_message

Сообщение из топика группы или нет. Значения: 1 - из топика, 0 - нет

#### \_tggroup\_forum\_topic\_created

Название топика

#### \_tggroup\_message\_thread\_id

ID топика группы

#### \_tggroup\_reply\_to\_message

Является ли сообщение ответом: 1 - да, 0 - нет

#### \_tggroup\_sender\_chat

Откуда пришел ответ: supergroup - группа, channel - канал

#### \_tggroup\_sender\_chat\_title

Имя группы или канала отправителя ответа

#### \_tggroup\_sender\_chat\_username

Username группы или канала отправителя ответа

#### \_tggroup\_sender\_chat\_id

ID группы или канала отправителя ответа

#### \_tggroup\_reply\_to\_message\_text

Текст сообщения, на которое был дан ответ

#### \_tggroup\_reply\_to\_message\_text\_type

Тип сообщения, на которое был дан ответ: text, photo, video, audio, document, poll, voice

#### \_tggroup\_reply\_to\_message\_from\_id

ID подписчика, на сообщение которого ответили

#### \_tggroup\_reply\_to\_message\_from\_first\_name

Имя подписчика, на сообщение которого ответили

#### \_tggroup\_reply\_to\_message\_from\_last\_name

Фамилия подписчика, на сообщение которого ответили

#### \_tggroup\_new\_chat\_member

Подписчик вступил в группу: 1 - да, 0 - нет

#### \_tggroup\_left\_chat\_member

Подписчик вышел из группы: 1 - да, 0 - нет



## Web App Каталог и Календарь

#### \_webapp\_id

ID приложения

#### \_webapp\_order\_rubrics

Перечислены рубрики через запятую, в которых находятся заказанные товары

#### \_webapp\_title

Название приложения

#### \_webapp\_url

URL приложения

#### \_webapp\_type

Тип web app приложения: cat - каталог, cal - календарь

#### \_delrecid

Содержит id удаленной записи webapp календаря

#### \_delrecwebappid

Содержит id webapp приложения, из которого была удалена запись

---
description: Полный перечень
---

# Шаблоны и Функции

{% hint style="info" %}
Шаблоны, функции и их описания находятся в рабочих областях конструктора в Помощнике выражений и Подстановках. Использовать шаблоны и функции возможно в текстовых полях сообщений, значений и условий. Шаблоны и функции могут отличаться, в зависимости от рабочей области
{% endhint %}

## Шаблоны и функции Блоков

### \[Answer] или \[A] или \[Ответ]

Шаблон ответа подписчика. Будет заменен на последний ответ от подписчика.

### \[Name]

Имя подписчика

### \[FullName]

Имя и фамилия подписчика

### \[ClientLink]

Ссылка на профиль подписчика в мессенджере, если это возможно

### \[Date]

Текущая дата в формате дд.мм.гггг

### \[GenStrN]

Генерация строки из N символов. Содержит знаки a-zA-Z0-9

### \[GenNumN]

Генерация цифровой строки из N символов

### \[AnswerN]

Содержит ответ подписчика на блок с порядковым номером N. Также содержит нажатие подписчиком на кнопку типа Значение

### \[ALast(X,Y,..)]

Содержит ответ подписчика, который пришел последним. X,Y - порядковые номера блоков

### \[AnswerID(id)]

Содержит ответ подписчика на блок, id которого указан

### \[ALastID(id1,id2,..)]

Содержит ответ подписчика, который пришел последним из блоков, id которых указаны

### \[DataN]

Данные, поступившие в сценарий из другого сценария или по запросу к внешнему серверу, где N - id данных (может быть цифрами или буквами)

### \{{ X + Y \}}

Выражение, которое будет вычислено

### \[Actions] или \[External]

Шаблон сценария действий, который будет заменен на сообщение, возвращаемое сценарием действий обратно в сценарий. Используется только в поле сообщения блока

### \[SendContact(phone,first\_name,last\_name)]

Отправляет контакт. Пример: \[SendContact(+7913587xxxx,Иван,Петров)]. Для использования в Телеграм и бот-лендинге.

### \[SendLocation(latitude,longitude)]

Отправляет карту по координатам широты и долготы. Пример: \[SendLocation(55.751971853583576,37.61750669332571)]. Для использования в Телеграм.

### \[SendVenue(latitude,longitude,title, address)]

Отправляет карту с местом мероприятия по координатам широты и долготы. Пример: \[SendVenue(55.751971853583576,37.61750669332571,Кофейня,ул. Чайная, 123)]. Для использования в Телеграм.

### \[SumInWords(SUM,ruble,kopek)]

Заменяет число SUM прописью. ruble и kopek может принимать значение true или false, которые используются для подстановки слова рубли и копейки

### \[DaysBetween(date1,date2)]

Вычисляет разницу в днях между датами date2 и date1

### \[DaysInMonth]

Выводит количество дней в текущем месяце

### \[CharUp]

Делает следующий символ за шаблоном с большой буквы. Сам шаблон при этом будет удален

### \[CharLow]

Делает следующий символ за шаблоном с маленькой буквы. Сам шаблон при этом будет удален

### \[Exit]

Заменяется ключевым словом выхода из сценария. Используется в сообщении выхода. Только для блоков

### \[StrLen(Строка)]

Шаблон возвращает длину строки. Можно использовать шаблоны или переменные (в сценариях действий)

### \[Round(Число, Точность)] или \[Round(Число)]

Шаблон производит округление числа до определенного знака. Если точность не указана, то число округляется до целого

### \[ClientID]

У подписчиков из мессенджеров и бот-лендинга существует ID, по которым они определяются. Шаблон заменяется на ID текущего подписчика. Используется, в частности, для отправки сообщений в бот, для выборки или сохранения информации о подписчике в список, таблицу

### \[Messenger]

Мессенджер или бот-лендинг, который использует подписчик. Для Telegram - telegram, для Viber - viber, для VK - vk, для WhatsApp - wa, для бот-лендинга - lp, для Jivo - jivo

### \[BotID]

ID бота (канала), из которого подписчик взаимодействует с вашей автоворонкой.  Используется, в частности, для отправки сообщений в бот, для выборки или сохранения информации о подписчике в список, таблицу

### \[Files(url1, url2...)]

Шаблон отправки фото/файлов в бот по их URL (ссылке). Шаблон будет удален из текста сообщения, а перечисленные фото/файлы будут отправлены в бот. Используется, в частности, для того, чтобы отправлять файлы по выборке из списка. Вместо URL может быть указана переменная, которая содержит URL's через запятую, либо перечисленные через запятую переменные, содержащие ссылки на фото/файлы. Если отправляется несколько фото в Телеграмме, то их можно сгруппировать, отметив соответствующую опцию в настройках блока, где используется шаблон.

Например, вы получаете сгенерированную картинку по стороннему API и отправляете ее подписчику в бот.

### \[GenerateEmail]

Генерирует случайный email адрес

### \[GeneratePhone(prefix)]

Генерирует случайный номер телефона, где prefix - код страны, например, \[GeneratePhone(+7)]

### /to + ID блока

Переход на определенный блок сценария, например, /toABCD

### \[LineBreak]

Перенос строки. Используется, например, для отправки сообщения напрямую через Телеграм бот API в группу или канал



## Шаблоны и функции сценария действий

{% hint style="info" %}
Все шаблоны Блоков могут использоваться в сценарии действий. Шаблоны и функции для сценария действий перечислены ниже. Для отображения сообщения из сценария действий в блоке, используйте поле блока шаблон \[Actions]
{% endhint %}

### #{переменная}

Шаблон переменной для хранения данных. Может быть строкой или массивом (при сохранении/добавлении выборки из списка или Гугл Таблиц). Цикл жизни переменной совпадает с циклом жизни сценария сообщения. Как только сценарий сообщения будет завершен, исчезнут и переменные. Видимость переменной распространяется на любые сценарии действий вызванные сценарным сообщением.

&#x20;В переменную можно сохранять простые математические выражения с использованием других переменных и шаблонов.

### \[Random(X,Y)]

Возвращает случайное число между X и Y

### \[AddDate(date,N)]

Добавляет к дате date N дней и возвращает дату вида дд.мм.гггг

### \[AddMinutes(date,M)]

Добавляет к дате date (дд.мм.гггг или дд.мм.гггг чч:мм) M минут и возвращает дату вида дд.мм.гггг чч:мм

### \[DiffDates(date1, date2)]

Вычисляет разницу между датами в днях. Даты вводятся в формате дд.мм.гггг

### \[DiffMinutes(date1, date2)]

Вычисляет разницу между датами в минутах. Даты вводятся в формате дд.мм.гггг чч:мм

### \[WeekDay(date)]

Определяет день недели по дате date. Возвращает число от 1 до 7, где 1 - понедельник, 2 - вторник и т.д.

### \[CurrentMessage]

Возвращает порядковый номер блока, на котором находится этап выполнения сценария

### \[CurrentMessageID]

Возвращает ID блока, на котором находится этап выполнения сценария

### \[PrevMessage]

Возвращает порядковый номер предыдущего блока, на котором находился сценарий

### \[PrevMessageID]

Возвращает ID предыдущего блока, на котором находился сценарий

### \[CurrentWeekDay]

Текущий день недели. Возвращает число от 1 до 7

### \[CurrentDate]

Возвращает текущую дату формата дд.мм.гггг

### \[NextDate]

Возвращает дату завтрашнего дня формата дд.мм.гггг

### \[CurrentDay]

Текущий день месяца

### \[CurrentDayNormal]

Текущий день месяца с ведущим нулем

### \[CurrentMonth]

Число текущего месяца. Возвращает число от 0 до 11, где 0 - январь, 1 - февраль и т.д.

### \[CurrentMonthNormal]

Число текущего месяца с ведущим нулем. Возвращает число от 01 до 12, где 01 - январь, 02 - февраль и т.д.

### \[CurrentYear]

Текущий год в формате гггг

### \[CurrentTime]

Текущее время, согласно настройкам часового пояса аккаунта в формате чч:мм

### \[CreationDate]

Дата добавления подписчика в базу в формате дд.мм.гггг

### Сравнение дат

Даты сравниваются непосредственно в поле условий и выражений, с помощью значений или переменных. Т.е. вы можете написать #{date1} > #{date2}, чтобы сравнить даты. Также при выборках из списков можно использовать сравнение поля, содержащего дату, с датой, которую вы укажите в поле значения

### \[Block]

Название текущего блока

### \[PrevBlock]

Название предыдущего блока

### \[Self]

1. Заменяется текущим значением поля при работе со списками и Гугл Таблицами и CRM
2. Заменяется текущим значением ID сделки и ID контакта в CRM системе

### \[GlobalVar]

Содержит текущее значение глобальной переменной

### \[AccountActive]

Выводит 1 - если аккаунт активный и 0 - если аккаунт неактивный

### \[AccountTrial]

Выводит 1 - если аккаунт находится на пробном периоде и 0 - если пробный период закончился

### \[AccountTariff]

Выводит id текущего тарифа



### Для реферальной системы в Телеграме

### \[Balance]

Баланс подписчика

### \[Paid]

Сумма выплат

### \[Level]

Уровень в реферальной системе

### \[RefererClientID]

ClientID реферера

### \[RefererClientLink]

Ссылка на профиль реферера в Телеграм

### \[RefererFullName]

Полное имя реферера в Телеграм

### \[RefererName]

Имя реферера в Телеграм



{% hint style="info" %}
Также существуют системные переменные. Их описания можно посмотреть [тут](sistemnye-peremennye.md)
{% endhint %}

{% hint style="info" %}
Существуют дополнительные шаблоны, которые используются в готовых модулях магазина и записи на услуги. Их описания находятся непосредственно в рабочих областях модулей магазина и записи на услуги
{% endhint %}

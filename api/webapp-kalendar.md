---
description: Методы для работы с WebApp календарем
---

# WebApp календарь



## Добавление записи

#### Методы GET, POST

```
/calendar/event/add
```

#### Параметры запроса

{% code overflow="wrap" %}
```json
{
    "webappid": num | string - id приложения каталога, обязательный
    "date1": date | string - начальная дата в формате дд.мм.гггг или в формате даты, обязательный
    "date2": date | string - дата окончания в формате дд.мм.гггг или в формате даты, необязательный
    "dateformat": string - формат дат date1 и date2. Возможные значения: date - в формате даты, string - строкой дд.мм.гггг. По-умолчанию string
    "time": string - время записи чч:мм, необязательный
    "singledate": boolean - одиночная дата записи, необязательный
    "settime": boolean - запись со временем, необязательный
    "duration": string - длительность услуги в минутах, необязательный
    "event": string - название события, необязательный
    "eventinfo": string - описание события, необязательный
    "notifymes": string - сообщения для уведомления клиента, необязательный
    "notifymin": string - время уведомления в минутах до наступления события, необязательный
    "notifymin2": string - время второго уведомления в минутах до наступления события, необязательный
    "notifymin3": string - время третьего уведомления в минутах до наступления события, необязательный
    "clientid": num | string - ClientID подписчика, необязательный
    "botid": num | string - BotID бота, необязательный
}
```
{% endcode %}



#### Ответ

```json

{
        "id": num - id записи в БД
}

```

## Создание календаря

#### Метод POST

```
/calendar/add
```

#### Параметры запроса

{% code overflow="wrap" %}
```json
{
    "name": string - название календаря, обязательный
    "singledate": boolean - выбор одной даты для записи, необязательный
    "settime": boolean - возможность выбора времени, необязательный
    "setdateinfinite": boolean - запись на одну дату несколько раз, необязательный
    "settimeinfinite": boolean - запись на одно время несколько раз, необязательный
    "maxperslot": num | string - максимум записей на одно время, число, необязательный
    "endbuffer": num | string - время в минутах до окончания рабочего дня от последнего времени для записи, необязательный
    "text": { // объект с текстами (string), необязательный
          "finish": // "Готово",
          "headersingle": // "Выберите дату",
          "headerintfirst": // "Выберите дату начала",
          "headerintsecond": // "Выберите дату окончания",
          "headertime": // "Выберите время",
          "dateerror": // "Эта дата недоступна",
          "btnintfirst": // "Подтвердить дату",
          "btnintsecond": // "Подтвердить дату",
          "btnsingle": // "Подтвердить дату"
        },
    "btn": { // объект с цветом кнопок hex (string), необязательный
          "bgr": // "#1677FF",
          "text": // "#FFFFFF"
        },
        "backbtn": { // объект с цветом кнопки возврата к боту (string), необязательный
          "bgr": // "#3A3B43",
          "text": // "#FFFFFF"
        },
        "themecolors": { // объект цветов темы (string), необязательный
          "bgr": // "#3A3B43",
          "text": // "#FFFFFF",
          "elem": // "#1677FF",
          "elemtext": // "#444",
          "date": // "#1677FF"
        },
        "workingtime": [ // массив объектов графика работы по дням, необязательный
            {
                "days": [ // массив дней: пн, вт, ср, чт, пт, сб, вс
                    "пн",
                    "вт",
                    "ср",
                    "чт",
                    "пт"
                ],
                "time": [ // массив времени для записи
                    {
                        "hour": "09", // часы
                        "minute": "00" // минуты
                    },
                    {
                        "hour": "10", // часы
                        "minute": "00" // минуты
                    },
                    {
                        "hour": "11", // часы
                        "minute": "00" // минуты
                    }
                ]
            }
        ],
        "token": "" // токен бота для кнопки запуска приложения через меню, необязательный
}
```
{% endcode %}



#### Ответ

```json

{
        "name": string - название календаря
        "id": num - id календаря в БД
        "url": string - url webapp приложения
        "result": "calendar created"
}
```

## Изменение календаря

#### Метод POST

```
/calendar/edit
```

#### Параметры запроса

{% code overflow="wrap" %}
```json
{
    "id": num | string - id календаря, обязательный
    "name": string - название календаря, необязательный
    "singledate": boolean - выбор одной даты для записи, необязательный
    "settime": boolean - возможность выбора времени, необязательный
    "setdateinfinite": boolean - запись на одну дату несколько раз, необязательный
    "settimeinfinite": boolean - запись на одно время несколько раз, необязательный
    "maxperslot": num | string - максимум записей на одно время, число, необязательный
    "endbuffer": num | string - время в минутах до окончания рабочего дня от последнего времени для записи, необязательный
    "text": { // объект с текстами (string), необязательный
          "finish": // "Готово",
          "headersingle": // "Выберите дату",
          "headerintfirst": // "Выберите дату начала",
          "headerintsecond": // "Выберите дату окончания",
          "headertime": // "Выберите время",
          "dateerror": // "Эта дата недоступна",
          "btnintfirst": // "Подтвердить дату",
          "btnintsecond": // "Подтвердить дату",
          "btnsingle": // "Подтвердить дату"
        },
    "btn": { // объект с цветом кнопок hex (string), необязательный
          "bgr": // "#1677FF",
          "text": // "#FFFFFF"
        },
        "backbtn": { // объект с цветом кнопки возврата к боту (string), необязательный
          "bgr": // "#3A3B43",
          "text": // "#FFFFFF"
        },
        "themecolors": { // объект цветов темы (string), необязательный
          "bgr": // "#3A3B43",
          "text": // "#FFFFFF",
          "elem": // "#1677FF",
          "elemtext": // "#444",
          "date": // "#1677FF"
        },
        "workingtime": [ // массив объектов графика работы по дням, необязательный
            {
                "days": [ // массив дней: пн, вт, ср, чт, пт, сб, вс
                    "пн",
                    "вт",
                    "ср",
                    "чт",
                    "пт"
                ],
                "time": [ // массив времени для записи
                    {
                        "hour": "09", // часы
                        "minute": "00" // минуты
                    },
                    {
                        "hour": "10", // часы
                        "minute": "00" // минуты
                    },
                    {
                        "hour": "11", // часы
                        "minute": "00" // минуты
                    }
                ]
            }
        ],
        "token": "" // токен бота для кнопки запуска приложения через меню, необязательный
}
```
{% endcode %}



#### Ответ

```json

{
        "name": string - название календаря
        "id": num - id календаря в БД
        "url": string - url webapp приложения
        "result": "calendar changed"
}
```

## Удаление WebApp приложения

#### Методы GET, POST

```
/webapp/delete
```

#### Параметры запроса

{% code overflow="wrap" %}
```json
{
    "id": num | string - id приложения, обязательный
}
```
{% endcode %}



#### Ответ

```json

{
        "result": "deleted"
}

```

## Получение записей приложения календарь

#### Методы GET, POST

```
/calendar/schedule/get
```

#### Параметры запроса

{% code overflow="wrap" %}
```json
{
    "webappid": num | string - id приложения, обязательный
    "date1": string - дата начала диапазона в формате дд.мм.гггг, обязательная
    "date2": string - дата конца диапазона в формате дд.мм.гггг, необязательная
}
```
{% endcode %}



#### Ответ

{% code overflow="wrap" %}
```json

{
        "result": array - массив с данными о записях, содержит объекты с полями id, date1, date2, time, info, data
}
```
{% endcode %}

## Удаление записи по его id

#### Методы GET, POST

```
/calendar/schedule/delete
```

#### Параметры запроса

{% code overflow="wrap" %}
```json
{
    "id": num | string - id записи, обязательный
}
```
{% endcode %}



#### Ответ

{% code overflow="wrap" %}
```json

{
        "result": "deleted"
}
```
{% endcode %}

## Проверка занятости записи

#### Методы GET, POST

```
/calendar/check/busy
```

#### Параметры запроса

{% code overflow="wrap" %}
```json
{
    "webappid": num | string - id приложения каталога, обязательный
    "date": string - дата в формате дд.мм.гггг, обязательный
    "time": string - время записи чч:мм, необязательный
}
```
{% endcode %}



#### Ответ

{% code overflow="wrap" %}
```json

{
        "busy": string - возвращает true, если дата/время занята, false - дата/время свободны,
        "busyalt": string - возвращает 1, если дата/время занята, 0 - дата/время свободны
        "count": string - количество записей на текущий момент
}

```
{% endcode %}

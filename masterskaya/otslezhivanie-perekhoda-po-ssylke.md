# Отслеживание перехода по ссылке

Для отслеживания перехода по ссылке мы будем использовать один сценарий действий, где сгенерируем ссылку и выведем ее подписчику, и также в этом сценарии будем отслеживать переход и отправлять сообщение в бот по переданным в ссылке данным.

<figure><img src="../.gitbook/assets/Доска (26).png" alt=""><figcaption></figcaption></figure>

В первом действии Ссылка выбираем Создать ссылку и задаем саму ссылку с типом ссылки Индивидуальная. Также передаем данные подписчика для отправки ему сообщения в бот после перехода. Делаем выход с возвратом кнопки-ссылки, где в качестве ссылки указываем #{link}.

<figure><img src="../.gitbook/assets/Доска (27).png" alt=""><figcaption></figcaption></figure>

Следующее действия принимает переход по ссылке. Это действие Ссылка, где выбрано Принять ссылку.

<figure><img src="../.gitbook/assets/Доска (28).png" alt=""><figcaption></figcaption></figure>

После него делаем переход на действие JS код, в котором мы преобразуем переданные параметры в ссылке в отдельные переменные clientid, messenger, botid. Ниже делаем отправку в бот по этим переменным в качестве адресата.

<figure><img src="../.gitbook/assets/Доска (29).png" alt=""><figcaption></figcaption></figure>

{% hint style="info" %}
Обращаем внимание, что в действии приема ссылки (также как и в приеме вебхука в обмене данных) секция "Выход" работать не будет. Поэтому нужно использовать секцию "Отправка в бот"
{% endhint %}

{% hint style="info" %}
Если вы хотите передать несколько данных в идентификаторе ссылки, то перечислите их в строку с разделителем (например |). В действии после приема вы можете разделить переменную #{link\_payload} и сохранить данные в переменные по частям, чтобы использовать их в дальнейшем. Разделить строку можно с помощью действия JS код
{% endhint %}

Архив со сценарием

{% file src="../.gitbook/assets/quescha_golink.zip" %}

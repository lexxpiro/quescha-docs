# Отправка карты геолокации (Телеграм и WhatsApp)

Разберем как получать геолокацию от пользователя и как отправлять карту в бот.

Создадим цепочку и сообщение, где будем запрашивать координаты подписчика

<figure><img src="../.gitbook/assets/513b73c0-238e-4aa6-9c7f-cd08f8642b31.png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/585f211d-90d9-491e-a780-8ccc0b36bafc.png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/2595766c-a37e-49dc-8746-807e7476651d.png" alt=""><figcaption></figcaption></figure>

После отправки пользователем своего месторасположения, мы получаем координаты широты и долготы, которые помещаются в переменные #{client\_latitude} и #{client\_longitude} соответственно.

Воспользоваться переменными мы можем только в сценарии действий, поэтому создадим сценарий действий.

<figure><img src="../.gitbook/assets/1b1fba8b-a2fb-414b-8082-b615420fdba0.png" alt=""><figcaption></figcaption></figure>

В секции Отправка в бот мы указываем данные получателя карты (например менеджера/администратора).

В тексте сообщения выбираем из подстановок шаблон отправки карты **\[SendLocation(#{client\_latitude},#{client\_longitude})],** где в качестве широты и долготы указываем полученные от пользователя переменные.

Теперь нам нужно создать новый блок в сценарии и добавить туда наши действия "до отправки сообщения".

<figure><img src="../.gitbook/assets/51ba095b-7954-4967-baf2-d95f485eb4ac.png" alt=""><figcaption></figcaption></figure>

Все готово. Теперь вы можете использовать это не только для бизнеса, но и для отслеживания геолокации ваших близких:)



Если вы хотите отправить карту подписчику, вам потребуется указать координаты широты и долготы. Самый простой способ это зайти на Яндекс.Карты, найти нужную геопозицию и скопировать координаты, далее указать их в шаблоне \[SendLocation(широта,долгота)]. Вставьте этот шаблон в сообщение для подписчика. Готово.

<figure><img src="../.gitbook/assets/ad888765-44fc-4856-b6d1-13621db338ab (1).png" alt=""><figcaption></figcaption></figure>

{% embed url="https://drive.google.com/file/d/1YLbpRlXFWNcI8tOQXfwUhA36SQk-BZgr/view?usp=share_link" %}

